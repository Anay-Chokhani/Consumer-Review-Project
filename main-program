import edu.stanford.nlp.pipeline.*;
import edu.stanford.nlp.ling.CoreAnnotations;
import edu.stanford.nlp.sentiment.SentimentCoreAnnotations;
import edu.stanford.nlp.util.CoreMap;
import java.util.*;

public class CostcoVsSamsClubSentiment {
    public static void main(String[] args) {
        // Initialize Stanford CoreNLP pipeline for sentiment analysis
        Properties props = new Properties();
        props.setProperty("annotators", "tokenize,ssplit,parse,sentiment");
        StanfordCoreNLP pipeline = new StanfordCoreNLP(props);

        // Sample reviews
        List<String> costcoReviews = Arrays.asList(
                "Costco has great deals and very friendly staff!",
                "The food court is always clean and the pizza is amazing.",
                "Sometimes it's too crowded, but the savings are worth it."
        );

        List<String> samsClubReviews = Arrays.asList(
                "Sam's Club is good but sometimes the products are out of stock.",
                "The membership is cheaper but the quality is hit or miss.",
                "Checkout takes too long, but employees are helpful."
        );

        // Analyze and compute average sentiment for each
        double costcoScore = getAverageSentimentScore(costcoReviews, pipeline);
        double samsScore = getAverageSentimentScore(samsClubReviews, pipeline);

        // Display results
        System.out.println("=== Sentiment Comparison ===");
        System.out.printf("Costco average sentiment: %.2f%n", costcoScore);
        System.out.printf("Sam's Club average sentiment: %.2f%n", samsScore);

        if (costcoScore > samsScore)
            System.out.println("→ Costco has a more positive sentiment overall!");
        else if (samsScore > costcoScore)
            System.out.println("→ Sam's Club has a more positive sentiment overall!");
        else
            System.out.println("→ Both have equal sentiment!");
    }

    // Helper method to calculate average sentiment
    private static double getAverageSentimentScore(List<String> reviews, StanfordCoreNLP pipeline) {
        int total = 0;
        int count = 0;

        for (String text : reviews) {
            Annotation annotation = new Annotation(text);
            pipeline.annotate(annotation);
            List<CoreMap> sentences = annotation.get(CoreAnnotations.SentencesAnnotation.class);

            for (CoreMap sentence : sentences) {
                String sentiment = sentence.get(SentimentCoreAnnotations.SentimentClass.class);
                total += convertSentimentToScore(sentiment);
                count++;
            }
        }
        return (count == 0) ? 0 : (double) total / count;
    }

    // Converts sentiment label to numeric score
    private static int convertSentimentToScore(String sentiment) {
        switch (sentiment) {
            case "Very negative": return 1;
            case "Negative": return 2;
            case "Neutral": return 3;
            case "Positive": return 4;
            case "Very positive": return 5;
            default: return 3;
        }
    }
}
